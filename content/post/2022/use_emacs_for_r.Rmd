---
author: "Manuel Teodoro Tenango"
title: "Using Emacs for R"
image: ""
draft: true
date: 2022-12-07
description: " "
tags: ["R basics", "R tips", "emacs"]
categories: ["R"]
archives: ["2022"]
---

```{r setup, include=FALSE} 
knitr::opts_chunk$set(warning = FALSE, message = FALSE) 
```

## Title intro

To start using R, or almost anything else in Emacs, you basically need to know 3 things: 1) How to move in Emacs, meaning understanding what is what and learning a few key commands; 2) What is the configuration file and how to use it and 3) How to use packages to extend Emacs. In the first half of this post I will try to show how easy it is to cover these 3 points even for people who are inexperienced in programming. If you don't believe me I invite you to read just the first paragraph of the next section to give you an idea of how easy it really is. During the second half I will show how I'm using R in Emacs to give you a starting point of a fully functional environment for R, and will conclude with some topics that can be further explored. 

## Why did I chose Emacs as a researcher in the academia?

I started my professional life as a researcher in ecology-related topics. During my master studies I improved my knowledge on statistics considerably and due to that and to the complexity of my research project, I did not want to use a GUI-based software for my statistical analysis. Thus, I started learning R, and believe it or not, I completed my research project for my Thesis by tipping R code directly to the console from my handwritten notes. When I started my PhD I thought that it would be easier to just write the code I need in electronic format and copy-paste it to the R console. And with that idea in mind and the help of the internet, I discovered the text editors and Emacs, and a whole new universe opened up to me. I know that many in my position would be ashamed of sharing such a story but I simply want to exemplify how easy it is to start using Emacs, contrary to the popular belief. I went from having no idea of what a text editor is, to setting up and using Emacs with R, with no intermediate steps.

Emacs is a wonderful text editor that can easily be extended to do many things. You can have tools to help in writing your code such as different types of indentation, syntax highlighter, git utilities, project management, code maps, web browser, even play games. --->**Describe more as a developer**<---

The reason why I stayed with Emacs as a researcher in the academia was mainly due to org-mode. It is an Emacs major mode that helped me to organize my research and in still today it helps me to organize my job. You can think if it as the Emacs version of Markdown, with the possibility to organize to do lists, tag notes and sections, fully organize an agenda (tracking tasks, set deadlines, schedule items, etc.). You can add chunks of code from almost any language and, with the help of couple more library, you can run the code within the org file itself. Github and other git servers have integrated tools to view org files as html, but there are libraries to convert them also to pdf, libreoffice, create presentations and more. 

Another important point that made me fall in love with Emacs was the fact that, if I managed to keep most of my research files as text I could do it all from Emacs, instead of using different apps for different tasks. And so I did: I was writing my papers in LaTeX and organizing my bibliography with bibtex; I was saving data as CSV which Emacs can manage very well; the graphics were more of an issue but, since I used R to make most of it, I simply needed to save the right script for the right plot. And all this was organized in org-mode with links to this or that file according to the project, section, tag, etc. And the reason why I wanted to do this was not even for organization purposes, but rather because, as text, I could track all my changes using Git, with ended up being a huge support for my PhD work: I could revert changes if I had mistakes or explore old commits, and backup all of that easily. So, at the end, while R had been the reason why I decided to explore Emacs, it was in fact the combo Emacs + org-mode + git which improved my organization and productivity potentially during my research life. And I would like to share this tools with as many people as possible.

Thus, I decided to create this post to give you an idea of how easily you can start using Emacs for R coding. If you enjoy it and you'd like me to create more detail posts about some of the tools I describe here leave me a comment and I'll take care of it. I include a general list of the tools I use regularly in Emacs at the end, you can have a look there.

## Quick start 

Although Emacs is extremely customizable, it is true that it requires some coding skills and knowledge of a not so popular programming language called Emacs Lisp. You would probably have also read that Emacs has a very steep learning curve, which is also true. This two conditions usually scare people away from learning Emacs. In this chapter I will demonstrate that you don't need to know Emacs Lisp (or programming at all) and that with very little knowledge of Emacs you can have a ready-to-use super-powerful R editor.

This chapter is a brief overview of the rest of the post meant as a quick start to get Emacs up and working with R in just as few as 10 steps. The rest of the post will simply go deeper into each of the steps. 

 1. Make sure that you have installed both, Emacs and R in your computer.
 
 2. Open Emacs and press the keys Ctr + x, release and press Ctr + f (in Emacs notation, this combination of keys is expressed as "**C+x C+f**"). Focus on the **mini buffer**, it is the line positioned at the bottom of your window. It is waiting for you to type something. If there is some path to a folder already in that area delete it first and then type `~/.emacs.d/init.el` and enter. It should open a new empty window.
 
 ---> Image of modeline <---
 
 3. This is your configuration file. Paste the following code in your new window 
 
```{emacs-lisp emacs_init}
(require 'package)
(add-to-list 'package-archives
             '("melpa" . "https://melpa.org/packages/"))
(package-initialize)


(eval-when-compile 
  (add-to-list 'load-path "~/.emacs.d/elpa/")
  (require 'use-package))

(unless (package-installed-p 'use-package)
  (package-refresh-contents)
  (package-install 'use-package))
(setq use-package-always-ensure t)

(use-package ess)

(use-package company
  :config
  (add-hook 'after-init-hook 'global-company-mode))

(setq company-selection-wrap-around t
      company-tooltip-align-annotations t
      company-idle-delay 0.45
      company-minimum-prefix-length 3
      company-tooltip-limit 10)
```

This configuration assumes that you have installed R with all the defaults. If you have installed R in a directory of your choice, add the following line at the end of the configuration file, changing the path of my example for the path were you have installed R. 

```{emacs-lisp path_r}
(setq inferior-ess-r-program "C:/Users/Manuel/path_where_R_is/R-4.2.1/bin/R.exe")
```

 4. Type **C-x C-s** (meaning, Ctr + x, release, Ctr + s). This will save the file. 
 
 5. Type now Alt + x (in Mac *command* key instead of Alt or, if it does not work, the *option* key instead), this is the key Meta, represented in Emacs by **M+x**. At this point you want to focus again on your mini buffer, the line at the bottom of the screen.
 
 6. Type there `package-install` enter and then type `use-package`, enter. 
 
 7. Focus on the mini buffer in case it prompts something. If it asks you if you want to install the package type `y` and enter. If it tells you that it cannot find the package or it does not exist, close Emacs, open it again and repeat steps 5 and 6. It should show a message informing that it has been installed. 
 
 ---> image example <---
 
 8. Now close Emacs and open it again.
 
 9. Type again **C-x C-f** and type `test.R`, enter. You can change the path before the file if you wish (i.e. `~/Code/test.R`).
 
 10. A new empty area should appear. Type there one line of R code. When you are done, while keeping the cursor in the line where your code is, press **C-c C-j**, this sends a line to R. A new area will open, showing the R console and the results of the code you just sent. You can continue typing R code and use the same combination of keys to run a line, you can use **C-c C-p** to run a paragraph, **C-c C-f** to send a function and **C-c C-b** the send the whole buffer (which here basically means the whole file). You can save the file by pressing **C-x C-s**. 
 
 ---> screenshot <---
 
If everything went well now you should have a simple Emacs configuration to start coding in R. Congratulations!.

## Getting started with Emacs

### Installation and first steps

### Control, Meta and the minibuffer, moving in Emacs

### The configuration file

### Extending Emacs: packages

## ESS to speak with R

### What is ESS?

### How to use R in ESS

### Other useful add-ins for R productivity

## What next? - Explore Emacs libraries
